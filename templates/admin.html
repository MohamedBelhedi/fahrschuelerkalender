<!DOCTYPE html>
<html lang="{{ 'ar' if lang == 'ar' else 'de' }}">
<head>
  <meta charset="UTF-8">
  <title>{% if lang == 'ar' %} لوحة التحكم {% else %}Adminbereich{% endif %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>{% if lang == 'ar' %} لوحة التحكم للمدرب {% else %}Adminbereich – Fahrlehrer{% endif %}</h1>
    <div>
      <a href="?lang=de" class="btn btn-outline-primary btn-sm">Deutsch</a>
      <a href="?lang=ar" class="btn btn-outline-success btn-sm">العربية</a>
      <a href="/logout" class="btn btn-danger btn-sm">
        {% if lang == 'ar' %} تسجيل الخروج {% else %}Logout{% endif %}
      </a>
    </div>
  </div>

  {% for day, slots in appointments.items() %}
  <div class="card mb-4">
    <div class="card-header bg-dark text-white">{{ day }}</div>
    <div class="card-body">
      <table class="table table-striped text-center">
        <thead>
          <tr>
            <th>{% if lang == 'ar' %} الوقت {% else %}Zeit{% endif %}</th>
            <th>{% if lang == 'ar' %} الحالة {% else %}Status{% endif %}</th>
            <th>{% if lang == 'ar' %} الاسم {% else %}Name{% endif %}</th>
            <th>{% if lang == 'ar' %} تعديل {% else %}Aktion{% endif %}</th>
          </tr>
        </thead>
        <tbody>
          {% for slot in slots %}
          <tr>
            <td>{{ slot.time }}</td>
            <td>
              {% if slot.status == 'frei' %}
                {% if lang == 'ar' %} متاح {% else %}Frei{% endif %}
              {% else %}
                {% if lang == 'ar' %} محجوز {% else %}Gebucht{% endif %}
              {% endif %}
            </td>
            <td>{{ slot.name if slot.name else '-' }}</td>
            <td>
              <form method="post" class="d-inline">
                <input type="hidden" name="day" value="{{ day }}">
                <input type="hidden" name="time" value="{{ slot.time }}">
                <button name="action" value="frei" class="btn btn-success btn-sm">
                  {% if lang == 'ar' %} متاح {% else %}Frei setzen{% endif %}
                </button>
                <button name="action" value="gebucht" class="btn btn-danger btn-sm">
                  {% if lang == 'ar' %} محجوز {% else %}Als gebucht markieren{% endif %}
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% endfor %}

  <a href="/?lang={{lang}}" class="btn btn-secondary">
    {% if lang == 'ar' %} العودة إلى التقويم {% else %}Zurück zum Kalender{% endif %}
  </a>
</body>
</html>
